(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1945d9a9"],{"830a":function(e,t,a){},b417:function(e,t,a){"use strict";a("830a")},cb0e:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"dbhc"},[t("header",[e._v(" 特困自理能力评估 ")]),t("div",{staticClass:"searchBox"},[t("van-sticky",[t("van-dropdown-menu",{attrs:{"active-color":"#1989fa"}},[t("van-dropdown-item",{attrs:{title:"评估状态",options:e.option2},on:{change:e.changeEvent},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}}),t("van-dropdown-item",{attrs:{title:"搜索"}},[t("van-cell",[t("van-search",{attrs:{"show-action":"",placeholder:"请输入姓名/身份证号码"},on:{search:e.onSearch},scopedSlots:e._u([{key:"action",fn:function(){return[t("div",{on:{click:e.onSearch}},[e._v("搜索")])]},proxy:!0}]),model:{value:e.searchValue,callback:function(t){e.searchValue=t},expression:"searchValue"}})],1),t("van-cell",[t("div",{staticStyle:{padding:"5px 16px"}},[t("van-uploader",{staticStyle:{width:"100%",display:"block"},attrs:{"before-read":e.beforeRead,"after-read":e.uploadImg("IDCard")}},[t("van-button",{staticStyle:{width:"100%",display:"block"},attrs:{size:"small",block:"",type:"info","native-type":"button"}},[e._v("拍照识别 ")])],1)],1)])],1)],1)],1)],1),t("main",[t("van-pull-refresh",{on:{refresh:e.onRefresh},model:{value:e.refreshing,callback:function(t){e.refreshing=t},expression:"refreshing"}},[t("van-list",{attrs:{finished:e.finished,"finished-text":"没有更多了"},on:{load:e.onLoad},model:{value:e.loading,callback:function(t){e.loading=t},expression:"loading"}},e._l(e.items,(function(a,s){return t("div",{key:s,staticClass:"hc",on:{click:function(t){return e.routerPush(a.ab_id,s)}}},[t("div",{staticClass:"hcHeader"},[t("div",{staticClass:"hcHeader1"},[t("div",{staticClass:"circle",style:{backgroundColor:a.bgcolor}}),t("div",{staticStyle:{color:"#333333","margin-left":"5px"}},[e._v(e._s(a.ab_ex3))])]),t("div",{staticStyle:{color:"#666666"}},[e._v("评估状态："+e._s(a.aer_ex10))])]),t("div",{staticClass:"hcHeader2"},[t("div",[e._v("身份证号："+e._s(a.abm_ex2))])]),t("div",{staticClass:"hcHeader3"},[t("div",[e._v("联系电话："+e._s(a.ab_ex28))])]),t("div",{staticClass:"hcHeader3"},[t("div",[e._v("供养机构："+e._s(a.ab_ex195?a.ab_ex195:"无"))])]),t("div",{staticClass:"hcHeader4"},[e._v("申请日期："+e._s(e._f("formatDate")(a.ab_dat14)))])])})),0)],1)],1)])},i=[],o=a("b775"),l=a("fa7d");let n=e=>Object(o["a"])({method:"post",url:"/social/assistanceWeixin/TkEvaluationReportList",data:e,headers:{token:sessionStorage.getItem("token")}});var r={name:"hc",props:["headername","jz"],data(){return{items:[],page:"1",ab_ex3:"",bgcolor:"#bcbcbc",loading:!1,finished:!1,refreshing:!1,searchValue:"",value1:"",value2:"全部",option2:[{text:"全部",value:"全部"},{text:"完成",value:"完成"},{text:"未完成",value:"未完成"}],key:""}},created(){},methods:{changeEvent(){this.page="1","评估状态"==this.value2||"全部"==this.value2?this.value1="":"未完成"==this.value2?this.value1="未完成":"完成"==this.value2&&(this.value1="完成"),this.onRefresh()},async loadData(e){try{const t=await n(e);console.log(t),this.items=[...this.items,...t],t.length<10&&(this.finished=!0),e.key?this.key=e.key:this.key="",this.page=+this.page+1+"",this.loading=!1}catch(t){}},onLoad(){this.refreshing&&(this.item=[],this.refreshing=!1),this.loadData({key:this.key,aer_ex10:this.value2,page:this.page})},onRefresh(){this.resetInfo(),this.finished=!1,this.loading=!0,this.onLoad()},onSearch(){this.resetInfo(),this.value2="全部",this.loadData({key:this.searchValue,aer_ex10:this.value2,page:"1 "})},routerPush(e,t){console.log(e,t,"id"),console.log(this.items[t],"this.items[index].aer_id"),this.$router.push({path:"/SelfCareAssessmentTable?sId="+this.items[t].aer_id+"stype="+this.items[t].aer_ex10,query:{sId:this.items[t].aer_id,stype:this.items[t].aer_ex10}})},beforeRead(e){return"image/heic"!=e.type&&""!=e.type||(this.$toast.fail("照片格式不正确"),!1)},imgRequest(e,t,a,s){Object(o["a"])({method:"post",url:"/social/weixinMinios/fileUpload",data:e}).then(e=>{t.status="done",t.message="上传完成",console.log(e),-1!=a.indexOf("IDCard")&&Object(o["a"])({method:"post",url:"/social/assistanceWeixin/idOrc",data:{img:t.content}}).then(e=>{if(console.log(e,"res"),"ok"==e[0].status)try{let t=e[0].data.words_result;console.log(t),"IDCard"==a?(t["公民身份号码"].words=t["公民身份号码"].words.replace(/\s+/g,""),this.searchValue=t["公民身份号码"].words,this.onSearch()):this.$toast.fail("身份证对比信息不符,请上传正确的身份证1")}catch(t){console.log(t),this.fileList2.pop(),this.$toast.fail("身份证对比信息不符,请上传正确的身份证2")}else this.fileList2.pop(),this.$toast.fail("身份证对比信息不符,请上传正确的身份证3")}).catch(e=>{console.log(e)})}).catch(e=>{t.status="failed",t.message="上传失败",this.$toast.fail("上传失败"),console.log(e)})},uploadImg(e,t){return a=>{a.status="uploading",a.message="上传中...",console.log(a.file);new l["a"](a,e,this.imgRequest,t)}},resetInfo(){this.items=[],this.page="1"}}},c=r,h=(a("b417"),a("2877")),d=Object(h["a"])(c,s,i,!1,null,"2fc5800b",null);t["default"]=d.exports}}]);